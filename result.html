<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>çµæœç™ºè¡¨</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="result-container container">
    <h1>çµæœç™ºè¡¨</h1>
    <p id="scoreText"></p>
    <h2>é–“é•ãˆãŸå•é¡Œä¸€è¦§</h2>
    <ul id="wrongList"></ul>
    <button onclick="location.href='index.html'">ãƒˆãƒƒãƒ—ã¸æˆ»ã‚‹</button>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const result = JSON.parse(localStorage.getItem("quizResult") || "{}");
      const scoreElem = document.getElementById("scoreText");
      const wrongList = document.getElementById("wrongList");

      if (!result.total) {
        scoreElem.textContent = "çµæœãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“ã€‚";
        return;
      }

      const percent = ((result.score / result.total) * 100).toFixed(1);
      scoreElem.textContent = `ã‚ãªãŸã®å¾—ç‚¹ï¼š${result.total}å•ä¸­ ${result.score}å•æ­£è§£ï¼ˆ${percent}%ï¼‰`;

      wrongList.innerHTML = "";
      if (result.wrong && result.wrong.length > 0) {
        result.wrong.forEach((q) => {
          const li = document.createElement("li");
          li.innerHTML = `
            <strong>${q.question || "ï¼ˆå•é¡Œæ–‡ãªã—ï¼‰"}</strong><br>
            <small>æ­£è§£ï¼š${q.answer || (q.answerCause ? q.answerCause + " / " + q.answerFix : "â€•")}</small>
          `;
          wrongList.appendChild(li);
        });
      } else {
        wrongList.innerHTML = "<li>å…¨å•æ­£è§£ã§ã™ï¼ğŸ‰</li>";
      }
    });
  </script>
</body>
</html>
